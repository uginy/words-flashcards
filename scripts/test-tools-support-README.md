# OpenRouter Tools Support Test

–°–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏ tools/functions –≤ OpenRouter –º–æ–¥–µ–ª—è—Ö.

## –û–ø–∏—Å–∞–Ω–∏–µ

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç —Å–ø–∏—Å–æ–∫ –º–æ–¥–µ–ª–µ–π OpenRouter –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ function calling (tools) –∏ –ø—Ä—è–º–æ–≥–æ JSON —Ä–µ–∂–∏–º–∞. –î–ª—è –∫–∞–∂–¥–æ–π –º–æ–¥–µ–ª–∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–≤–∞ —Ç–µ—Å—Ç–∞:

1. **Tools Mode** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º function calling (`modelSupportsToolsExplicit: true`)
2. **Direct Mode** - –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º tools —Å –ø—Ä—è–º—ã–º JSON (`modelSupportsToolsExplicit: false`)

## –¢–µ—Å—Ç–∏—Ä—É–µ–º—ã–µ –º–æ–¥–µ–ª–∏

```
mistralai/devstral-small:free
meta-llama/llama-3.3-8b-instruct:free
meta-llama/llama-4-maverick:free
meta-llama/llama-4-scout:free
google/gemini-2.5-pro-exp-03-25
mistralai/mistral-small-3.1-24b-instruct:free
meta-llama/llama-3.3-70b-instruct:free
mistralai/mistral-7b-instruct:free
google/gemma-3-27b-it:free
google/gemma-3-12b-it:free
```

## –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–∑ 5 Hebrew —Å–ª–æ–≤:
- `◊ú◊ê◊õ◊ï◊ú` (–µ—Å—Ç—å)
- `◊°◊§◊®` (–∫–Ω–∏–≥–∞)
- `◊í◊ì◊ï◊ú` (–±–æ–ª—å—à–æ–π)
- `◊û◊î ◊©◊ú◊ï◊û◊ö` (–∫–∞–∫ –¥–µ–ª–∞)
- `◊©◊ú◊ï◊ù` (–ø—Ä–∏–≤–µ—Ç/–ø–æ–∫–∞)

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –æ—Ü–µ–Ω–∫–∏

### üü¢ Full Support
- –ú–æ–¥–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å function calling tools
- –ú–æ–∂–µ—Ç —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ direct JSON —Ä–µ–∂–∏–º–µ

### üü° Partial Support  
- –ú–æ–¥–µ–ª—å –ù–ï –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç function calling
- –ù–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ direct JSON —Ä–µ–∂–∏–º–µ

### üî¥ No Support
- –ú–æ–¥–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∏ –≤ –æ–¥–Ω–æ–º —Ä–µ–∂–∏–º–µ

### ‚ö´ Error
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

## –ó–∞–ø—É—Å–∫

```bash
# –ß–µ—Ä–µ–∑ npm script
bun run test:tools-support

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é
npx tsx scripts/test-tools-support.ts
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

- **Timeout**: 30 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∑–∞–ø—Ä–æ—Å
- **Delay –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏**: 5 —Å–µ–∫—É–Ω–¥
- **Retry –ª–æ–≥–∏–∫–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∏–∑ `enrichWordsWithLLM`

## –í—ã—Ö–æ–¥–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **`tools-support-results.json`** - –î–µ—Ç–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
2. **`tools-support-report.md`** - Markdown –æ—Ç—á–µ—Ç —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

```typescript
interface ToolsSupportResult {
  modelName: string;
  toolsSupport: 'full' | 'none' | 'partial' | 'error';
  toolsModeSuccess: boolean;
  directModeSuccess: boolean;
  toolsModeError?: string;
  directModeError?: string;
  toolsModeResponseTime: number;
  directModeResponseTime: number;
  recommendedMode: 'tools' | 'direct';
}
```

## –ü—Ä–∏–º–µ—Ä—ã –æ—à–∏–±–æ–∫

### Function Calling –æ—à–∏–±–∫–∏
- `"Expected a function call"` - –ú–æ–¥–µ–ª—å –Ω–µ –ø–æ–Ω–∏–º–∞–µ—Ç function calling
- `"tools field exceeds max depth limit"` - –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞

### JSON –æ—à–∏–±–∫–∏
- `"JSON parse error"` - –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON –≤ –æ—Ç–≤–µ—Ç–µ
- `"Empty or invalid response"` - –ü—É—Å—Ç–æ–π –∏–ª–∏ –Ω–µ–ø–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç

## –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°–∫—Ä–∏–ø—Ç –≤—ã–≤–æ–¥–∏—Ç —Ü–≤–µ—Ç–Ω–æ–π –ø—Ä–æ–≥—Ä–µ—Å—Å –≤ –∫–æ–Ω—Å–æ–ª—å:
- üöÄ –ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥–µ–ª–∏
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã (–∑–µ–ª–µ–Ω—ã–π)
- ‚ùå –û—à–∏–±–∫–∏ (–∫—Ä–∞—Å–Ω—ã–π)
- ‚è≥ –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä
- üìä –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## Troubleshooting

### –¢–∞–π–º–∞—É—Ç—ã
–ï—Å–ª–∏ –º–æ–¥–µ–ª–∏ —á–∞—Å—Ç–æ –ø–∞–¥–∞—é—Ç –ø–æ —Ç–∞–π–º–∞—É—Ç—É, –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `TIMEOUT_MS` –≤ —Å–∫—Ä–∏–ø—Ç–µ.

### Rate Limits
–ú–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ –µ—Å—Ç—å –∑–∞–¥–µ—Ä–∂–∫–∞ 5 —Å–µ–∫—É–Ω–¥. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å `DELAY_BETWEEN_MODELS`.

### API Key
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `DEFAULT_OPENROUTER_API_KEY` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –∫–ª—é—á –≤–∞–ª–∏–¥–Ω—ã–π.

## –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫—Ä–∏–ø—Ç–∞ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ:

1. **Full Support –º–æ–¥–µ–ª–∏** - –ª—É—á—à–∏–π –≤—ã–±–æ—Ä –¥–ª—è function calling
2. **Partial Support –º–æ–¥–µ–ª–∏** - –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å `modelSupportsToolsExplicit: false`
3. **No Support –º–æ–¥–µ–ª–∏** - –∏–∑–±–µ–≥–∞–π—Ç–µ –∏–ª–∏ –∏—Å—Å–ª–µ–¥—É–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
4. **Response –≤—Ä–µ–º–µ–Ω–∞** - –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∞–º—ã—Ö –±—ã—Å—Ç—Ä—ã—Ö –º–æ–¥–µ–ª–µ–π

## –¶–µ–ª—å

–û–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫–∞–∫–∏–µ OpenRouter –º–æ–¥–µ–ª–∏:
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –Ω–∞—à function calling —Ñ–æ—Ä–º–∞—Ç
- ‚ö†Ô∏è –†–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ direct JSON —Ä–µ–∂–∏–º–µ  
- ‚ùå –ù–µ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Ç–µ–∫—É—â–µ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –∑–∞–ø—Ä–æ—Å–æ–≤